import{_ as $,u as w,o as b,a,c,b as s,d as T,F as y,r as f,t as d,n as M,e as D,f as g,g as B,h as N,i as k,w as I,j as L}from"./index-BgIYdxAU.js";import{p as C}from"./index-BuRDC5Sn.js";const S={class:"top-nav"},V={class:"nav-container"},z={class:"nav-menu"},E=["onMouseenter"],F=["onClick"],H=["onClick"],P={__name:"TopCategoryNav",setup(x){const u=w(),l=g([]),i=g(null),m=B(()=>l.value),h=async()=>{try{const n=await C.getCategoryTree();l.value=n.data.tree||[]}catch(n){console.error("加载导航失败",n)}},r=n=>{i.value=n},_=()=>{i.value=null},p=n=>{u.push({name:"CategoryArticleList",params:{id:n}}),i.value=null};return b(h),(n,e)=>(a(),c("nav",S,[s("div",V,[s("div",{class:"nav-logo",onClick:e[0]||(e[0]=t=>T(u).push("/"))},[...e[1]||(e[1]=[s("span",null,"CMS",-1)])]),s("div",z,[(a(!0),c(y,null,f(m.value,t=>{var v;return a(),c("div",{key:t.id,class:"nav-item",onMouseenter:o=>r(t.id),onMouseleave:_},[s("span",{onClick:o=>p(t.id)},d(t.name),9,F),(v=t.children)!=null&&v.length?(a(),c("div",{key:0,class:M(["dropdown",{show:i.value===t.id}])},[(a(!0),c(y,null,f(t.children,o=>(a(),c("div",{key:o.id,class:"dropdown-item",onClick:A=>p(o.id)},d(o.name),9,H))),128))],2)):D("",!0)],40,E)}),128))])])]))}},j=$(P,[["__scopeId","data-v-0c3125bf"]]),R={class:"category-sidebar"},q={class:"tree-node"},G={class:"node-label"},J={__name:"CategorySidebar",setup(x){const u=w(),l=g([]),i={children:"children",label:"name"},m=async()=>{try{const r=await C.getCategoryTree();l.value=r.data.tree||[]}catch(r){console.error("加载分类树失败",r)}},h=r=>{u.push({name:"CategoryArticleList",params:{id:r.id}})};return b(m),(r,_)=>{const p=N("el-tree");return a(),c("div",R,[_[0]||(_[0]=s("div",{class:"sidebar-title"},"分类目录",-1)),k(p,{data:l.value,props:i,"node-key":"id","default-expand-all":!1,onNodeClick:h,class:"category-tree"},{default:I(({node:n,data:e})=>[s("span",q,[s("span",G,d(e.name),1)])]),_:1},8,["data"])])}}},K=$(J,[["__scopeId","data-v-f9dd4ec0"]]),O={class:"home-page"},Q={class:"content-container"},U={class:"main-content"},W={class:"article-list"},X=["onClick"],Y={class:"article-meta"},Z={class:"article-excerpt"},ee={__name:"Home",setup(x){const u=w(),l=g([]),i=g([]),m=async()=>{try{const e=await C.getPublishedArticles();l.value=e.data}catch(e){console.error("加载文章失败",e)}},h=async()=>{try{const e=await C.getCategories();i.value=e.data}catch(e){console.error("加载分类失败",e)}},r=e=>{const t=i.value.find(v=>v.id===e);return(t==null?void 0:t.name)||"未知"},_=e=>e?new Date(e).toLocaleDateString("zh-CN"):"",p=e=>{if(!e)return"";const t=e.replace(/<[^>]+>/g,"");return t.length>100?t.substring(0,100)+"...":t},n=e=>{u.push({name:"ArticleDetail",params:{id:e}})};return b(()=>{m(),h()}),(e,t)=>{const v=N("el-empty");return a(),c("div",O,[k(j),s("div",Q,[k(K),s("div",U,[t[0]||(t[0]=s("h1",null,"最新文章",-1)),s("div",W,[(a(!0),c(y,null,f(l.value,o=>(a(),c("div",{key:o.id,class:"article-item",onClick:A=>n(o.id)},[s("h3",null,d(o.title),1),s("p",Y,[s("span",null,d(r(o.categoryId)),1),s("span",null,d(_(o.publishedAt)),1)]),s("p",Z,d(p(o.renderedContent)),1)],8,X))),128))]),l.value.length===0?(a(),L(v,{key:0,description:"暂无文章"})):D("",!0)])])])}}},oe=$(ee,[["__scopeId","data-v-6f6b0449"]]);export{oe as default};
