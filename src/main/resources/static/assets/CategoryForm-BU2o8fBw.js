import{f as w,c as x,b as k,t as C,d as a,w as s,E as i,k as _,h as E,r,l as N,u as B,o as h,e as v}from"./index-DiXZHzxD.js";import{c as m}from"./category-DmPU1bee.js";import"./index-DQ-5gSyr.js";const A={style:{"max-width":"600px"}},D={__name:"CategoryForm",setup(M){const p=N(),y=B(),u=_(()=>!!p.params.id),c=_(()=>p.params.id),t=E({name:"",description:""}),V=async()=>{if(u.value)try{const e=(await m.adminGetAll()).data.find(l=>l.id===Number(c.value));e&&(t.value={name:e.name,description:e.description})}catch{i.error("加载失败")}},b=async()=>{var o,e;try{u.value?await m.update(c.value,t.value):await m.create(t.value),i.success("保存成功"),y.push("/admin/categories")}catch(l){i.error(((e=(o=l.response)==null?void 0:o.data)==null?void 0:e.message)||"保存失败")}};return w(V),(o,e)=>{const l=r("el-input"),d=r("el-form-item"),f=r("el-button"),g=r("el-form");return h(),x("div",A,[k("h2",null,C(u.value?"编辑分类":"新建分类"),1),a(g,{model:t.value,"label-width":"80px",style:{"margin-top":"20px"}},{default:s(()=>[a(d,{label:"名称"},{default:s(()=>[a(l,{modelValue:t.value.name,"onUpdate:modelValue":e[0]||(e[0]=n=>t.value.name=n),placeholder:"请输入分类名称"},null,8,["modelValue"])]),_:1}),a(d,{label:"描述"},{default:s(()=>[a(l,{modelValue:t.value.description,"onUpdate:modelValue":e[1]||(e[1]=n=>t.value.description=n),type:"textarea",rows:3,placeholder:"请输入描述"},null,8,["modelValue"])]),_:1}),a(d,null,{default:s(()=>[a(f,{type:"primary",onClick:b},{default:s(()=>[...e[3]||(e[3]=[v("保存",-1)])]),_:1}),a(f,{onClick:e[2]||(e[2]=n=>o.$router.back())},{default:s(()=>[...e[4]||(e[4]=[v("取消",-1)])]),_:1})]),_:1})]),_:1},8,["model"])])}}};export{D as default};
