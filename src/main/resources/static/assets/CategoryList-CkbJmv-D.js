import{f as w,c as v,b as u,d as t,w as n,E as i,r as d,h as C,u as k,o as x,e as r,t as $,v as A}from"./index-DiXZHzxD.js";import{c as m}from"./category-DmPU1bee.js";import"./index-DQ-5gSyr.js";const B={style:{"margin-bottom":"20px",display:"flex","justify-content":"space-between"}},N={__name:"CategoryList",setup(E){const f=k(),p=C([]),c=async()=>{try{const a=await m.adminGetAll();p.value=a.data}catch{i.error("加载失败")}},_=a=>{f.push(`/admin/categories/${a}/edit`)},b=async a=>{var e,s;try{await A.confirm("确定删除该分类吗？","确认",{type:"warning"}),await m.delete(a),i.success("删除成功"),c()}catch(o){o!=="cancel"&&i.error(((s=(e=o.response)==null?void 0:e.data)==null?void 0:s.message)||"删除失败")}};return w(c),(a,e)=>{const s=d("el-button"),o=d("el-table-column"),y=d("el-table");return x(),v("div",null,[u("div",B,[e[2]||(e[2]=u("h2",null,"分类管理",-1)),t(s,{type:"primary",onClick:e[0]||(e[0]=l=>a.$router.push("/admin/categories/new"))},{default:n(()=>[...e[1]||(e[1]=[r(" 新建分类 ",-1)])]),_:1})]),t(y,{data:p.value,stripe:""},{default:n(()=>[t(o,{prop:"id",label:"ID",width:"80"}),t(o,{prop:"name",label:"名称",width:"200"}),t(o,{prop:"description",label:"描述"}),t(o,{prop:"createdAt",label:"创建时间",width:"180"},{default:n(({row:l})=>[r($(new Date(l.createdAt).toLocaleString()),1)]),_:1}),t(o,{label:"操作",width:"180"},{default:n(({row:l})=>[t(s,{size:"small",onClick:g=>_(l.id)},{default:n(()=>[...e[3]||(e[3]=[r("编辑",-1)])]),_:1},8,["onClick"]),t(s,{size:"small",type:"danger",onClick:g=>b(l.id)},{default:n(()=>[...e[4]||(e[4]=[r("删除",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])])}}};export{N as default};
