import{_ as b,u as w,r as A,o as a,c as r,a as y,F as p,b as s,t as d,d as i,w as c,e as l,f as L,g as C,h as x,i as B}from"./index-DiXZHzxD.js";import{a as D}from"./article-DFaw3Ivz.js";import{c as M}from"./category-DmPU1bee.js";import{u as N}from"./useAuth-CdpwDKnJ.js";import"./index-DQ-5gSyr.js";const I={class:"user-menu"},S={class:"username"},T={__name:"UserMenu",setup($){const u=w(),{isLoggedIn:_,username:m,logout:f}=N();function v(){f()}function g(){u.push("/login")}function h(){u.push("/register")}return(e,t)=>{const n=A("el-button");return a(),r("div",I,[y(_)?(a(),r(p,{key:0},[s("span",S,d(y(m)),1),i(n,{type:"text",onClick:v},{default:c(()=>[...t[0]||(t[0]=[l("退出",-1)])]),_:1})],64)):(a(),r(p,{key:1},[i(n,{type:"text",onClick:g},{default:c(()=>[...t[1]||(t[1]=[l("登录",-1)])]),_:1}),i(n,{type:"text",onClick:h},{default:c(()=>[...t[2]||(t[2]=[l("注册",-1)])]),_:1})],64))])}}},V=b(T,[["__scopeId","data-v-27e15bce"]]),F={class:"home"},H={class:"header"},R={class:"header-content"},U={class:"nav"},E={class:"main"},P={class:"article-list"},j=["onClick"],q={class:"article-title"},z={class:"article-meta"},G={class:"category"},J={class:"time"},K={class:"article-preview"},O={__name:"Home",setup($){const u=w(),_=x([]),m=x([]),f=async()=>{try{const e=await D.getPublished();_.value=e.data}catch(e){console.error(e)}},v=async()=>{try{const e=await M.getAll();m.value=e.data}catch(e){console.error(e)}},g=e=>{u.push(`/article/${e}`)},h=e=>new Date(e).toLocaleDateString();return L(()=>{f(),v()}),(e,t)=>{const n=A("router-link");return a(),r("div",F,[s("header",H,[s("div",R,[t[3]||(t[3]=s("h1",{class:"title"},"CMS 系统",-1)),s("nav",U,[i(n,{to:"/",class:"nav-link"},{default:c(()=>[...t[0]||(t[0]=[l("首页",-1)])]),_:1}),i(n,{to:"/search",class:"nav-link"},{default:c(()=>[...t[1]||(t[1]=[l("搜索",-1)])]),_:1}),(a(!0),r(p,null,C(m.value,o=>(a(),B(n,{key:o.id,to:`/category/${o.id}`,class:"nav-link"},{default:c(()=>[l(d(o.name),1)]),_:2},1032,["to"]))),128)),i(n,{to:"/admin",class:"nav-link admin"},{default:c(()=>[...t[2]||(t[2]=[l("后台管理",-1)])]),_:1}),i(V)])])]),s("main",E,[s("div",P,[(a(!0),r(p,null,C(_.value,o=>{var k;return a(),r("div",{key:o.id,class:"article-card",onClick:Q=>g(o.id)},[s("h3",q,d(o.title),1),s("div",z,[s("span",G,d(o.categoryName),1),s("span",J,d(h(o.publishedAt)),1)]),s("div",K,d((k=o.renderedContent)==null?void 0:k.slice(0,200))+"...",1)],8,j)}),128))])])])}}},et=b(O,[["__scopeId","data-v-dec29bf6"]]);export{et as default};
