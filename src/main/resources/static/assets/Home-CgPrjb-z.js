import{_ as $,u as w,o as b,a,c as l,b as s,d as x,F as y,r as k,t as d,n as M,e as D,f as h,g as B,h as N,i as f,w as I,j as L}from"./index-C9hZSNhL.js";import{p as C}from"./index-61r5FlMj.js";const S={class:"top-nav"},V={class:"nav-container"},z={class:"nav-menu"},E=["onMouseenter"],F=["onClick"],H=["onClick"],P={__name:"TopCategoryNav",setup(A){const u=w(),c=h([]),i=h(null),m=B(()=>c.value),g=async()=>{try{const o=await C.getCategoryTree();c.value=o.data.tree||[]}catch(o){console.error("加载导航失败",o)}},r=o=>{i.value=o},p=()=>{i.value=null},_=o=>{u.push({name:"CategoryArticleList",params:{id:o}}),i.value=null};return b(g),(o,e)=>(a(),l("nav",S,[s("div",V,[s("div",{class:"nav-logo",onClick:e[0]||(e[0]=t=>x(u).push("/"))},[...e[2]||(e[2]=[s("span",null,"CMS",-1)])]),s("div",z,[(a(!0),l(y,null,k(m.value,t=>{var v;return a(),l("div",{key:t.id,class:"nav-item",onMouseenter:n=>r(t.id),onMouseleave:p},[s("span",{onClick:n=>_(t.id)},d(t.name),9,F),(v=t.children)!=null&&v.length?(a(),l("div",{key:0,class:M(["dropdown",{show:i.value===t.id}])},[(a(!0),l(y,null,k(t.children,n=>(a(),l("div",{key:n.id,class:"dropdown-item",onClick:T=>_(n.id)},d(n.name),9,H))),128))],2)):D("",!0)],40,E)}),128)),s("div",{class:"nav-item admin-link",onClick:e[1]||(e[1]=(...t)=>o.goToAdmin&&o.goToAdmin(...t))},[...e[3]||(e[3]=[s("span",null,"后台管理",-1)])])])])]))}},j=$(P,[["__scopeId","data-v-45a10d83"]]),R={class:"category-sidebar"},q={class:"tree-node"},G={class:"node-label"},J={__name:"CategorySidebar",setup(A){const u=w(),c=h([]),i={children:"children",label:"name"},m=async()=>{try{const r=await C.getCategoryTree();c.value=r.tree||[]}catch(r){console.error("加载分类树失败",r)}},g=r=>{u.push({name:"CategoryArticleList",params:{id:r.id}})};return b(m),(r,p)=>{const _=N("el-tree");return a(),l("div",R,[p[0]||(p[0]=s("div",{class:"sidebar-title"},"分类目录",-1)),f(_,{data:c.value,props:i,"node-key":"id","default-expand-all":!1,onNodeClick:g,class:"category-tree"},{default:I(({node:o,data:e})=>[s("span",q,[s("span",G,d(e.name),1)])]),_:1},8,["data"])])}}},K=$(J,[["__scopeId","data-v-87e94d46"]]),O={class:"home-page"},Q={class:"content-container"},U={class:"main-content"},W={class:"article-list"},X=["onClick"],Y={class:"article-meta"},Z={class:"article-excerpt"},ee={__name:"Home",setup(A){const u=w(),c=h([]),i=h([]),m=async()=>{try{const e=await C.getPublishedArticles();c.value=e.data}catch(e){console.error("加载文章失败",e)}},g=async()=>{try{const e=await C.getCategories();i.value=e.data}catch(e){console.error("加载分类失败",e)}},r=e=>{const t=i.value.find(v=>v.id===e);return(t==null?void 0:t.name)||"未知"},p=e=>e?new Date(e).toLocaleDateString("zh-CN"):"",_=e=>{if(!e)return"";const t=e.replace(/<[^>]+>/g,"");return t.length>100?t.substring(0,100)+"...":t},o=e=>{u.push({name:"ArticleDetail",params:{id:e}})};return b(()=>{m(),g()}),(e,t)=>{const v=N("el-empty");return a(),l("div",O,[f(j),s("div",Q,[f(K),s("div",U,[t[0]||(t[0]=s("h1",null,"最新文章",-1)),s("div",W,[(a(!0),l(y,null,k(c.value,n=>(a(),l("div",{key:n.id,class:"article-item",onClick:T=>o(n.id)},[s("h3",null,d(n.title),1),s("p",Y,[s("span",null,d(r(n.categoryId)),1),s("span",null,d(p(n.publishedAt)),1)]),s("p",Z,d(_(n.renderedContent)),1)],8,X))),128))]),c.value.length===0?(a(),L(v,{key:0,description:"暂无文章"})):D("",!0)])])])}}},oe=$(ee,[["__scopeId","data-v-6f6b0449"]]);export{oe as default};
