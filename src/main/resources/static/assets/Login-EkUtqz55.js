import{_ as x,c as h,d as a,w as l,r as s,u as k,o as C,e as _,b as R,h as p,E as c}from"./index-DiXZHzxD.js";import{u as B}from"./useAuth-CdpwDKnJ.js";import{a as E}from"./index-DQ-5gSyr.js";const L={class:"login-container"},N={__name:"Login",setup(q){const m=k(),{login:g}=B(),i=p(),n=p(!1),o=p({username:"",password:""}),v={username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]};async function w(){var u,e;await i.value.validate(),n.value=!0;try{await E.post("/auth/login",{username:o.value.username,password:o.value.password}),g(o.value.username,o.value.password),c.success("登录成功"),m.push("/")}catch(t){c.error(((e=(u=t.response)==null?void 0:u.data)==null?void 0:e.message)||"登录失败")}finally{n.value=!1}}function y(){m.push("/register")}return(u,e)=>{const t=s("el-input"),r=s("el-form-item"),f=s("el-button"),V=s("el-form"),b=s("el-card");return C(),h("div",L,[a(b,{class:"login-card"},{header:l(()=>[...e[2]||(e[2]=[R("h2",null,"CMS 登录",-1)])]),default:l(()=>[a(V,{model:o.value,rules:v,ref_key:"formRef",ref:i,"label-width":"80px"},{default:l(()=>[a(r,{label:"用户名",prop:"username"},{default:l(()=>[a(t,{modelValue:o.value.username,"onUpdate:modelValue":e[0]||(e[0]=d=>o.value.username=d),placeholder:"请输入用户名"},null,8,["modelValue"])]),_:1}),a(r,{label:"密码",prop:"password"},{default:l(()=>[a(t,{modelValue:o.value.password,"onUpdate:modelValue":e[1]||(e[1]=d=>o.value.password=d),type:"password",placeholder:"请输入密码"},null,8,["modelValue"])]),_:1}),a(r,null,{default:l(()=>[a(f,{type:"primary",onClick:w,loading:n.value,style:{width:"100%"}},{default:l(()=>[...e[3]||(e[3]=[_(" 登录 ",-1)])]),_:1},8,["loading"])]),_:1}),a(r,null,{default:l(()=>[a(f,{type:"text",onClick:y},{default:l(()=>[...e[4]||(e[4]=[_("还没有账号？去注册",-1)])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})])}}},A=x(N,[["__scopeId","data-v-751a0a9d"]]);export{A as default};
