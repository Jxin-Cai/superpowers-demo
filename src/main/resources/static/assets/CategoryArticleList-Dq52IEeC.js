import{_ as N,f as b,c as r,b as e,d as h,w as l,F as g,g as y,t as n,j as B,r as D,h as d,k as L,l as V,u as S,o,e as u,i as $}from"./index-DiXZHzxD.js";import{a as F}from"./article-DFaw3Ivz.js";import{c as I}from"./category-DmPU1bee.js";import"./index-DQ-5gSyr.js";const M={class:"category-page"},R={class:"header"},j={class:"header-content"},E={class:"nav"},P={class:"main"},T={class:"category-title"},q={class:"article-list"},z=["onClick"],G={class:"article-title"},H={class:"article-meta"},J={class:"time"},K={key:0,class:"empty"},O={__name:"CategoryArticleList",setup(Q){const k=V(),f=S(),_=L(()=>k.params.id),c=d([]),m=d([]),v=d(null),C=async()=>{try{const t=await F.getPublished(_.value);c.value=t.data}catch(t){console.error(t)}},A=async()=>{try{const t=await I.getAll();m.value=t.data,v.value=t.data.find(s=>s.id===Number(_.value))}catch(t){console.error(t)}},w=t=>{f.push(`/article/${t}`)},x=t=>new Date(t).toLocaleDateString();return b(()=>{A(),C()}),(t,s)=>{var p;const i=D("router-link");return o(),r("div",M,[e("header",R,[e("div",j,[s[2]||(s[2]=e("h1",{class:"title"},"CMS 系统",-1)),e("nav",E,[h(i,{to:"/",class:"nav-link"},{default:l(()=>[...s[0]||(s[0]=[u("首页",-1)])]),_:1}),(o(!0),r(g,null,y(m.value,a=>(o(),$(i,{key:a.id,to:`/category/${a.id}`,class:"nav-link"},{default:l(()=>[u(n(a.name),1)]),_:2},1032,["to"]))),128)),h(i,{to:"/admin",class:"nav-link admin"},{default:l(()=>[...s[1]||(s[1]=[u("后台管理",-1)])]),_:1})])])]),e("main",P,[e("h2",T,n(((p=v.value)==null?void 0:p.name)||"加载中..."),1),e("div",q,[(o(!0),r(g,null,y(c.value,a=>(o(),r("div",{key:a.id,class:"article-card",onClick:U=>w(a.id)},[e("h3",G,n(a.title),1),e("div",H,[e("span",J,n(x(a.publishedAt)),1)])],8,z))),128)),c.value.length===0?(o(),r("div",K,"该分类下暂无文章")):B("",!0)])])])}}},tt=N(O,[["__scopeId","data-v-c994c842"]]);export{tt as default};
