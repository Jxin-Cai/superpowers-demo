import{_ as T,f as $,c as f,b as l,d as r,w as c,m as j,F as x,g as w,i as y,j as P,E as V,h as o,r as n,u as R,o as s,e as C,t as i}from"./index-DiXZHzxD.js";import{a as z}from"./index-DQ-5gSyr.js";const q={class:"search-page"},G={class:"search-bar"},H={class:"article-list"},J={class:"summary"},O={class:"meta"},Q={class:"time"},W={__name:"SearchArticle",setup(X){const D=R(),d=o(""),p=o(null),_=o([]),h=o([]),m=o(!1),g=o(1),b=o(10),k=o(0);async function N(){try{const t=await z.get("/public/categories");h.value=t.data.data}catch{V.error("获取分类失败")}}async function u(){m.value=!0;try{const t={keyword:d.value||void 0,categoryId:p.value||void 0,page:g.value-1,size:b.value},a=await z.get("/public/articles/search",{params:t});_.value=a.data.data.content||[],k.value=a.data.data.totalElements||0}catch{V.error("搜索失败")}finally{m.value=!1}}function B(t){D.push(`/article/${t}`)}function E(t){return t?new Date(t).toLocaleDateString():""}return $(()=>{N(),u()}),(t,a)=>{const S=n("el-button"),A=n("el-input"),I=n("el-option"),U=n("el-select"),F=n("el-tag"),K=n("el-card"),L=n("el-empty"),M=n("el-pagination");return s(),f("div",q,[l("div",G,[r(A,{modelValue:d.value,"onUpdate:modelValue":a[0]||(a[0]=e=>d.value=e),placeholder:"搜索文章标题或关键词",clearable:"",onKeyup:j(u,["enter"]),style:{width:"400px"}},{append:c(()=>[r(S,{onClick:u},{default:c(()=>[...a[3]||(a[3]=[C("搜索",-1)])]),_:1})]),_:1},8,["modelValue"]),r(U,{modelValue:p.value,"onUpdate:modelValue":a[1]||(a[1]=e=>p.value=e),placeholder:"选择分类",clearable:"",style:{width:"200px","margin-left":"10px"}},{default:c(()=>[(s(!0),f(x,null,w(h.value,e=>(s(),y(I,{key:e.id,label:e.name,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),l("div",H,[(s(!0),f(x,null,w(_.value,e=>(s(),y(K,{key:e.id,class:"article-card",onClick:v=>B(e.id)},{default:c(()=>{var v;return[l("h3",null,i(e.title),1),l("p",J,i((v=e.content)==null?void 0:v.substring(0,100))+"...",1),l("div",O,[r(F,{size:"small"},{default:c(()=>[C(i(e.categoryName),1)]),_:2},1024),l("span",Q,i(E(e.publishedAt)),1)])]}),_:2},1032,["onClick"]))),128)),_.value.length===0&&!m.value?(s(),y(L,{key:0,description:"没有找到相关文章"})):P("",!0)]),r(M,{"current-page":g.value,"onUpdate:currentPage":a[2]||(a[2]=e=>g.value=e),"page-size":b.value,total:k.value,onCurrentChange:u,layout:"prev, pager, next",style:{"margin-top":"20px","text-align":"center"}},null,8,["current-page","page-size","total"])])}}},ee=T(W,[["__scopeId","data-v-d6e9ec4e"]]);export{ee as default};
