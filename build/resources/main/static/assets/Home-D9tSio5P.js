import{_ as w,u as b,o as x,a as o,c as r,b as t,d as T,F as f,r as k,t as u,n as M,e as A,f as g,g as B,h as N,i as $,w as I,j as L}from"./index-CqkaHcZk.js";import{p as y}from"./index-BuRDC5Sn.js";const S={class:"top-nav"},V={class:"nav-container"},z={class:"nav-menu"},E=["onMouseenter"],F=["onClick"],H=["onClick"],P={__name:"TopCategoryNav",setup(D){const d=b(),c=g([]),l=g(null),m=B(()=>c.value),h=async()=>{try{const e=await y.getCategoryTree();c.value=e.data.tree||[]}catch(e){console.error("加载导航失败",e)}},a=e=>{l.value=e},p=()=>{l.value=null},_=e=>{d.push({name:"CategoryArticleList",params:{id:e}}),l.value=null},C=()=>{d.push("/admin")};return x(h),(e,s)=>(o(),r("nav",S,[t("div",V,[t("div",{class:"nav-logo",onClick:s[0]||(s[0]=n=>T(d).push("/"))},[...s[1]||(s[1]=[t("span",null,"CMS",-1)])]),t("div",z,[(o(!0),r(f,null,k(m.value,n=>{var i;return o(),r("div",{key:n.id,class:"nav-item",onMouseenter:v=>a(n.id),onMouseleave:p},[t("span",{onClick:v=>_(n.id)},u(n.name),9,F),(i=n.children)!=null&&i.length?(o(),r("div",{key:0,class:M(["dropdown",{show:l.value===n.id}])},[(o(!0),r(f,null,k(n.children,v=>(o(),r("div",{key:v.id,class:"dropdown-item",onClick:te=>_(v.id)},u(v.name),9,H))),128))],2)):A("",!0)],40,E)}),128)),t("div",{class:"nav-item admin-link",onClick:C},[...s[2]||(s[2]=[t("span",null,"后台管理",-1)])])])])]))}},j=w(P,[["__scopeId","data-v-2324fdc2"]]),R={class:"category-sidebar"},q={class:"tree-node"},G={class:"node-label"},J={__name:"CategorySidebar",setup(D){const d=b(),c=g([]),l={children:"children",label:"name"},m=async()=>{try{const a=await y.getCategoryTree();c.value=a.data.tree||[]}catch(a){console.error("加载分类树失败",a)}},h=a=>{d.push({name:"CategoryArticleList",params:{id:a.id}})};return x(m),(a,p)=>{const _=N("el-tree");return o(),r("div",R,[p[0]||(p[0]=t("div",{class:"sidebar-title"},"分类目录",-1)),$(_,{data:c.value,props:l,"node-key":"id","default-expand-all":!1,onNodeClick:h,class:"category-tree"},{default:I(({node:C,data:e})=>[t("span",q,[t("span",G,u(e.name),1)])]),_:1},8,["data"])])}}},K=w(J,[["__scopeId","data-v-f9dd4ec0"]]),O={class:"home-page"},Q={class:"content-container"},U={class:"main-content"},W={class:"article-list"},X=["onClick"],Y={class:"article-meta"},Z={class:"article-excerpt"},ee={__name:"Home",setup(D){const d=b(),c=g([]),l=g([]),m=async()=>{try{const e=await y.getPublishedArticles();c.value=e.data}catch(e){console.error("加载文章失败",e)}},h=async()=>{try{const e=await y.getCategories();l.value=e.data}catch(e){console.error("加载分类失败",e)}},a=e=>{const s=l.value.find(n=>n.id===e);return(s==null?void 0:s.name)||"未知"},p=e=>e?new Date(e).toLocaleDateString("zh-CN"):"",_=e=>{if(!e)return"";const s=e.replace(/<[^>]+>/g,"");return s.length>100?s.substring(0,100)+"...":s},C=e=>{d.push({name:"ArticleDetail",params:{id:e}})};return x(()=>{m(),h()}),(e,s)=>{const n=N("el-empty");return o(),r("div",O,[$(j),t("div",Q,[$(K),t("div",U,[s[0]||(s[0]=t("h1",null,"最新文章",-1)),t("div",W,[(o(!0),r(f,null,k(c.value,i=>(o(),r("div",{key:i.id,class:"article-item",onClick:v=>C(i.id)},[t("h3",null,u(i.title),1),t("p",Y,[t("span",null,u(a(i.categoryId)),1),t("span",null,u(p(i.publishedAt)),1)]),t("p",Z,u(_(i.renderedContent)),1)],8,X))),128))]),c.value.length===0?(o(),L(n,{key:0,description:"暂无文章"})):A("",!0)])])])}}},oe=w(ee,[["__scopeId","data-v-6f6b0449"]]);export{oe as default};
